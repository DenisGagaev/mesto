(()=>{"use strict";var e={964:(e,t,s)=>{e.exports=s.p+"337fdf8bef6ccccc39db.jpg"},133:(e,t,s)=>{e.exports=s.p+"3fd13fd414ae4b600abc.jpg"},827:(e,t,s)=>{e.exports=s.p+"177ee9f61ce1c10db20f.jpg"},153:(e,t,s)=>{e.exports=s.p+"eb92281517198c5a47e3.jpg"},707:(e,t,s)=>{e.exports=s.p+"5f03b0ad7b7186156c7c.jpg"},898:(e,t,s)=>{e.exports=s.p+"619546dde4d49815a498.jpg"}},t={};function s(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,s),i.exports}s.m=e,s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.p="",s.b=document.baseURI||self.location.href,(()=>{const e=[{text:"Казань",link:new URL(s(898),s.b)},{text:"Сочи",link:new URL(s(133),s.b)},{text:"Куршская Коса",link:new URL(s(964),s.b)},{text:"Владивосток",link:new URL(s(707),s.b)},{text:"Санкт-Петербург",link:new URL(s(827),s.b)},{text:"Москва",link:new URL(s(153),s.b)}];class t{constructor(e,t,s){this._text=e.text,this._link=e.link,this._cardSelector=t,this._handleCardClick=s}_getTemplate(){return document.querySelector(this._cardSelector).content.cloneNode(!0)}generateCard(){this._element=this._getTemplate();const e=this._element.querySelector(".element__image"),t=this._element.querySelector(".element__text");return e.src=this._link,e.alt=this._text,t.textContent=this._text,this._setEventListeners(),this._element}_setEventListeners(){this._element.querySelector(".element__like").addEventListener("click",(e=>{this._toggleLike(e)})),this._element.querySelector(".elements__delete").addEventListener("click",(e=>{this._deleteFotoCard(e)})),this._element.querySelector(".element__image").addEventListener("click",this._handleCardClick)}_toggleLike(e){e.target.classList.toggle("element__like_active")}_deleteFotoCard(e){e.target.closest(".element").remove()}}const r={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__input-error_visible",inputError:".popup__input-error"};class o{constructor(e,t){this._form=t,this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inputErrorClass=e.inputErrorClass,this._inactiveButtonClass=e.inactiveButtonClass,this._errorClass=e.errorClass,this._inputError=e.inputError,this._inputs=Array.from(this._form.querySelectorAll(this._inputSelector))}_showInputError(e){this._errorElement=this._form.querySelector("#".concat(e.id,"-error")),e.classList.add(this._inputErrorClass),this._errorElement.classList.add(this._errorClass),this._errorElement.textContent=this._element.validationMessage}_hideInputError(e){this._errorElement=this._form.querySelector("#".concat(e.id,"-error")),e.classList.remove(this._inputErrorClass),this._errorElement.classList.remove(this._errorClass),this._errorElement.textContent=""}_isValid(e){this._element=e,this._element.validity.valid?this._hideInputError(e):this._showInputError(e)}_hasInvalidInput(){return this._inputs.some((e=>!e.validity.valid))}_toggleButtonState(){this._buttonElement.setAttribute("disabled",!0),this._buttonElement.classList.add(this._inactiveButtonClass)}toggleSubmit(){this._hasInvalidInput()?this._toggleButtonState():(this._buttonElement.removeAttribute("disabled",!0),this._buttonElement.classList.remove(this._inactiveButtonClass))}_setEventListeners(){this._buttonElement=this._form.querySelector(this._submitButtonSelector),this._inputs.forEach((e=>{e.addEventListener("input",(()=>{this._isValid(e),this.toggleSubmit()}))}))}enableValidation(){this._setEventListeners(),this._form.addEventListener("submit",(e=>e.preventDefault()),this.toggleSubmit())}hideAllErrors(){this._inputs.forEach((e=>{this._hideInputError(e)})),this._toggleButtonState()}}class i{constructor(e){this._popupSelector=e,this._popupOverlay=this._popupSelector.querySelector(".popup__overlay"),this._closePopup=this._popupSelector.querySelector(".popup__close"),this._handleEscClose=this._handleEscClose.bind(this),this._klassOpenedPopup="popup_opened"}open(){document.addEventListener("keydown",this._handleEscClose),this._popupSelector.classList.add(this._klassOpenedPopup)}close(){document.removeEventListener("keydown",this._handleEscClose),this._popupSelector.classList.remove(this._klassOpenedPopup)}_handleEscClose(e){"Escape"===e.key&&this.close()}setEventListeners(){this._closePopup.addEventListener("click",(()=>{this.close()})),this._popupOverlay.addEventListener("click",(()=>{this._popupSelector.classList.contains(this._klassOpenedPopup)&&this.close()}))}}class n extends i{constructor(e,t){let{formSubmitCallBack:s}=t;super(e),this._formSubmitCallBack=s,this._formSubmit=this._formSubmit.bind(this),this._form=this._popupSelector.querySelector(".popup__form"),this._inputs=Array.from(this._form.querySelectorAll(".popup__input"))}_formSubmit(){this._formSubmitCallBack(this._getInputValues())}_getInputValues(){const e={};return this._inputs.forEach((t=>{e[t.name]=t.value})),e}close(){super.close(),this._form.reset()}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",this._formSubmit)}}const l=document.querySelector("#popup__form-profile"),p=document.querySelector("#popup__Profile"),_=document.querySelector("#popup__card"),c=document.querySelector("#popap__image"),u=l.querySelector("#popup__name-input"),a=l.querySelector("#popup__text-input"),h=document.querySelector(".profile__name"),m=document.querySelector(".profile__text"),d=document.querySelector(".elements"),S=document.querySelector(".profile__edit"),E=document.querySelector(".profile__addfoto-button"),f=new o(r,p),b=new o(r,_);f.enableValidation(),b.enableValidation();const v=e=>{const t={link:e.target.src,text:e.target.closest(".element").querySelector(".element__text").textContent};g.open(t)},g=new class extends i{constructor(e){super(e),this._imageElement=this._popupSelector.querySelector(".popup__photo"),this._popupImageSubtitle=this._popupSelector.querySelector(".popup__image-subtitle")}open(e){let{text:t,link:s}=e;this._imageElement.src=s,this._imageElement.alt=t,this._popupImageSubtitle.textContent=t,super.open()}}(c);g.setEventListeners();const x=e=>new t(e,"#cardTemplate",v).generateCard(e),C=new class{constructor(e,t){let{renderItems:s}=e;this._renderer=s,this._container=t}renderItems(e){e.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({renderItems:e=>{C.addItem(x(e))}},d);C.renderItems(e);const y=new n(_,{formSubmitCallBack:e=>{const t={text:e.photoText,link:e.photoLink};C.addItem(x(t),!0),y.close(),console.log()}});y.setEventListeners();const L=new class{constructor(e){let{profileName:t,profileText:s}=e;this._name=t,this._text=s}getUserInfo(){return{name:this._name.textContent,text:this._text.textContent}}setUserInfo(e){this._name.textContent=e.profileName.trim(),this._text.textContent=e.profileText.trim()}}({profileName:h,profileText:m}),k=new n(p,{formSubmitCallBack:e=>{L.setUserInfo(e),console.log(),k.close()}});k.setEventListeners(),S.addEventListener("click",(()=>{const e=L.getUserInfo();f.hideAllErrors(),u.value=e.name,a.value=e.text,k.open()})),E.addEventListener("click",(()=>{y.open(),b.hideAllErrors()}))})()})();